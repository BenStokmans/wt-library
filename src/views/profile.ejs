<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="<%= urlBase %>/css/global-form.css">
    <link rel="stylesheet" href="<%= urlBase %>/css/definitions.css">
    <link rel="stylesheet" href="<%= urlBase %>/css/profile.css">
    <link rel="icon" type="image/png" href="<%= urlBase %>/favicon.png" />
    <title><%= user.firstName + user.lastName %> (<%= user.username %>) - WTLibrary</title>
</head>
<body>
<main>
    <header>
        <img src="<%= urlBase %>/favicon.png" alt="logo"/>
        <h1><a href="<%= urlBase %>">WTLibrary</a></h1>
    </header>

    <h3>Profile</h3>
    <form>
        <fieldset>
            <div>
                <label for="username">Username</label>
                <input id="username" name="username" type="text" value="<%= user.username %>" disabled/>
            </div>

            <div>
                <label for="email">Email address</label>
                <input id="email" name="email" type="text" value="<%= user.email %>" disabled/>
            </div>

            <div>
                <label for="first-name">First name</label>
                <input id="first-name" name="first_name" type="text" value="<%= user.firstName %>" disabled/>
            </div>

            <div>
                <label for="last-name">Last name</label>
                <input id="last-name" name="last_name" type="text" value="<%= user.lastName %>" disabled/>
            </div>

            <div>
                <label for="street-and-number">Street and house number</label>
                <input id="street-and-number" name="street_and_number" type="text" value="<%= user.streetAndNumber %>" disabled/>
            </div>

            <div>
                <label for="zip-code">Zip code</label>
                <input id="zip-code" name="zip_code" type="text" value="<%= user.zipCode %>" disabled/>
            </div>

            <div>
                <label for="city">City</label>
                <input id="city" name="city" type="text" value="<%= user.city %>" disabled/>
            </div>

            <div></div>
        </fieldset>
    </form>

    <h3>Borrowing history</h3>
    <section class="history">
        <% if (history.length === 0) { %>
        <p>No history</p>
        <% } else { %>
        <table>
            <tr>
                <th>Book title</th>
                <th>Start date</th>
                <th>End date</th>
                <th>State</th>
            </tr>
            <% for (let reservation of history) { %>
                <tr>
                    <td>
                        <a href="<%= urlBase %>/book/<%= reservation.book.isbn %>">
                            <%= reservation.book.title %>
                        </a>
                    </td>
                    <td><%= reservation.startTime.toLocaleString() %></td>
                    <td><%= reservation.endTime.toLocaleString() %></td>
                    <% if (reservation.returned) { %>
                        <td class="history__entry__state history__entry__state--returned">Returned</td>
                    <% } else if (new Date() < reservation.endTime) { %>
                        <td class="history__entry__state history__entry__state--due">Due</td>
                        <!-- TODO: we kunnen hier misschien nog een knopje toevoegen om de reservation te verlengen -->
                    <% } else { %>
                        <td class="history__entry__state history__entry__state--late">Late</td>
                    <% } %>
                </tr>
            <% } %>
        </table>
    </section>
    <% } %>
</main>
</body>
</html>
